#!/bin/bash
CF_DNS_DOMAIN_ADD()
{
curl -s -X POST -H "X-Auth-Key: $CF_API_KEY" -H "X-Auth-Email: $CF_API_EMAIL" \
     -H "Content-Type: application/json" \
     "https://api.cloudflare.com/client/v4/zones" \
     --data '{"account": {"id": "$CF_ACC_ID"}, "name":"'$DOMAIN'","jump_start":false}' | jq . | grep id | head -1 | cut -d '"' -f 4
}

CF_DNS_A_RECORD_ADD()
{
curl -s -X POST "https://api.cloudflare.com/client/v4/zones/${CFDNSID}/dns_records" \
     -H "X-Auth-Email: $CF_API_EMAIL" \
     -H "X-Auth-Key: $CF_API_KEY" \
     -H "Content-Type: application/json" \
     --data '{"type":"A","name":"@","content":"${SERVER_IP}","ttl":1,"priority":10,"proxied":false}' | jq .
}

CF_DNS_CNAME_RECORD_ADD()
{
curl -s -X POST "https://api.cloudflare.com/client/v4/zones/${CFDNSID}/dns_records" \
     -H "X-Auth-Email: $CF_API_EMAIL" \
     -H "X-Auth-Key: $CF_API_KEY" \
     -H "Content-Type: application/json" \
     --data '{"type":"CNAME","name":"${CNAME}","content":"'$DOMAIN'","ttl":1,"priority":10,"proxied":false}' | jq .
}

CF_DNS_RECORD_DELETE()
{
curl -X DELETE "https://api.cloudflare.com/client/v4/zones/${CFID}/dns_records/${RECORDID}" \
     -H "X-Auth-Email: ${CFACC}" \
     -H "X-Auth-Key: ${CFKEY}" \
     -H "Content-Type: application/json" | jq .
}

CF_DNS_RECORDS_GET()
{
curl -X GET "https://api.cloudflare.com/client/v4/zones/${CFID}/dns_records?type=A&page=1&per_page=300&match=all" \
     -H "X-Auth-Email: ${CFACC}" \
     -H "X-Auth-Key: ${CFKEY}" \
     -H "Content-Type: application/json" | jq .
}
